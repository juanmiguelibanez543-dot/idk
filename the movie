-- 🔥 Camlock Hub + FPS Boost + Reset FPS
-- Rayfield UI

local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()

local Window = Rayfield:CreateWindow({
   Name = "🔥 Camlock Hub",
   LoadingTitle = "Delta - Flame Hood",
   LoadingSubtitle = "Smooth Camlock + FPS Boost",
   ConfigurationSaving = { Enabled = false },
   KeySystem = false,
})

-- // Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UIS = game:GetService("UserInputService")
local CoreGui = game:GetService("CoreGui")
local Lighting = game:GetService("Lighting")
local CAMERA = workspace.CurrentCamera
local LOCAL = Players.LocalPlayer

-- // Vars
local CamlockEnabled = false
local Target = nil
local Smoothness = 0.22
local HeadOffset = Vector3.new(0,1.4,0)
local FOV_RADIUS = 150
local ButtonGui = nil

-- // FOV Circle
local circle = Drawing.new("Circle")
circle.Visible = false
circle.Transparency = 0.5
circle.Color = Color3.fromRGB(255,255,255)
circle.Thickness = 1.5
circle.NumSides = 60
circle.Radius = FOV_RADIUS
circle.Filled = false

-- // Target Functions
local function IsValidTarget(player)
    if not player or player == LOCAL then return false end
    if not player.Character then return false end
    local hrp = player.Character:FindFirstChild("HumanoidRootPart")
    local hum = player.Character:FindFirstChildOfClass("Humanoid")
    if not hrp or not hum or hum.Health <= 0 then return false end
    local screenPos, onScreen = CAMERA:WorldToViewportPoint(hrp.Position)
    if not onScreen then return false end
    local dist2D = (Vector2.new(screenPos.X, screenPos.Y) - Vector2.new(CAMERA.ViewportSize.X/2, CAMERA.ViewportSize.Y/2)).Magnitude
    return dist2D <= FOV_RADIUS
end

local function GetNearestTarget()
    local best, bestDist = nil, math.huge
    for _, p in pairs(Players:GetPlayers()) do
        if IsValidTarget(p) then
            local hrp = p.Character:FindFirstChild("HumanoidRootPart")
            if hrp then
                local screenPos = CAMERA:WorldToViewportPoint(hrp.Position)
                local dist2D = (Vector2.new(screenPos.X, screenPos.Y) - Vector2.new(CAMERA.ViewportSize.X/2, CAMERA.ViewportSize.Y/2)).Magnitude
                if dist2D < bestDist then
                    best, bestDist = p, dist2D
                end
            end
        end
    end
    return best
end

-- // Camlock Toggle
local function ToggleCamlock()
    CamlockEnabled = not CamlockEnabled
    if CamlockEnabled then
        circle.Visible = true
        if ButtonGui then ButtonGui.Text = "Camlock: ON" end
    else
        circle.Visible = false
        Target = nil
        if ButtonGui then ButtonGui.Text = "Camlock: OFF" end
    end
end

-- // Rayfield Tabs
local Tab = Window:CreateTab("⚙️ Camlock")

-- Spawn Button
Tab:CreateButton({
   Name = "Spawn Camlock",
   Callback = function()
        if ButtonGui then
            ButtonGui:Destroy()
            ButtonGui = nil
        end

        -- Create floating button
        local screenGui = Instance.new("ScreenGui")
        screenGui.ResetOnSpawn = false
        screenGui.Parent = CoreGui

        local btn = Instance.new("TextButton")
        btn.Size = UDim2.new(0, 140, 0, 36)
        btn.Position = UDim2.new(0.5, -70, 0.9, -40)
        btn.AnchorPoint = Vector2.new(0.5, 0.5)
        btn.BackgroundTransparency = 0.15
        btn.BackgroundColor3 = Color3.fromRGB(28,28,28)
        btn.Font = Enum.Font.Gotham
        btn.TextSize = 16
        btn.Text = "Camlock: OFF"
        btn.TextColor3 = Color3.new(1,1,1)
        btn.Parent = screenGui
        Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 6)

        ButtonGui = btn

        -- Toggle on click
        btn.MouseButton1Click:Connect(function()
            ToggleCamlock()
        end)
   end,
})

-- Extra Execute Button
Tab:CreateButton({
   Name = "Execute Carl Script",
   Callback = function()
       loadstring(game:HttpGet("https://raw.githubusercontent.com/carl1212s/skibd/main/carl-vascal-on-top"))()
   end,
})

-- FPS Boost Button
Tab:CreateButton({
   Name = "⚡ FPS Boost",
   Callback = function()
       for _, v in pairs(Lighting:GetChildren()) do
           if v:IsA("PostEffect") then v.Enabled = false end
       end
       Lighting.GlobalShadows = false
       Lighting.FogEnd = 1e10
       Lighting.Brightness = 1
       workspace.StreamingEnabled = true
       settings().Rendering.QualityLevel = Enum.QualityLevel.Level01
       for _, v in pairs(workspace:GetDescendants()) do
           if v:IsA("Texture") or v:IsA("Decal") then
               v:Destroy()
           elseif v:IsA("ParticleEmitter") or v:IsA("Trail") then
               v.Enabled = false
           elseif v:IsA("BasePart") then
               v.CastShadow = false
           end
       end
       game:GetService("StarterGui"):SetCore("SendNotification", {
           Title = "FPS Boost",
           Text = "✅ Boost Applied!",
           Duration = 3
       })
   end,
})

-- Reset FPS Button
Tab:CreateButton({
   Name = "♻️ Reset FPS",
   Callback = function()
       -- Reset lighting
       for _, v in pairs(Lighting:GetChildren()) do
           if v:IsA("PostEffect") then v.Enabled = true end
       end
       Lighting.GlobalShadows = true
       Lighting.FogEnd = 1000
       Lighting.Brightness = 2

       -- Reset quality
       settings().Rendering.QualityLevel = Enum.QualityLevel.Automatic

       game:GetService("StarterGui"):SetCore("SendNotification", {
           Title = "FPS Reset",
           Text = "🔄 Graphics Restored",
           Duration = 3
       })
   end,
})

-- // Main Camlock Loop
RunService.RenderStepped:Connect(function()
    circle.Position = Vector2.new(CAMERA.ViewportSize.X/2, CAMERA.ViewportSize.Y/2)
    if CamlockEnabled then
        if not Target or not IsValidTarget(Target) then
            Target = GetNearestTarget()
        end
        if Target and Target.Character then
            local hrp = Target.Character:FindFirstChild("HumanoidRootPart")
            if hrp then
                local myPos = CAMERA.CFrame.Position
                local desiredDir = (hrp.Position + HeadOffset - myPos).Unit
                local newLook = CAMERA.CFrame.LookVector:Lerp(desiredDir, math.clamp(1 - Smoothness, 0.01, 1))
                CAMERA.CFrame = CFrame.new(myPos, myPos + newLook)
            end
        end
    end
end)
